<!DOCTYPE html>
<html lang="en">
<head>
<meta charset="UTF-8">
<meta name="viewport" content="width=device-width, initial-scale=1.0">
<title>blossom menu</title>
<link rel="preconnect" href="https://fonts.googleapis.com">
<link href="https://fonts.googleapis.com/css2?family=Inter:wght@300;400;500;600;700&family=JetBrains+Mono:wght@400;500;700&display=swap" rel="stylesheet">
<style>
  * { margin: 0; padding: 0; box-sizing: border-box; }

  :root {
    --bg:           #0d0d0d;
    --panel:        #111111;
    --panel2:       #161616;
    --border:       #1e1e1e;
    --border2:      #2a2a2a;
    --accent:       #ff3dff;
    --accent-glow:  rgba(255,61,255,0.30);
    --accent-soft:  rgba(255,61,255,0.10);
    --accent-dim:   rgba(255,61,255,0.40);
    --text:         #e8e8e8;
    --text-dim:     #888888;
    --text-muted:   #444444;
    --on:           #22c55e;
    --on-bg:        rgba(34,197,94,0.10);
    --off:          #555555;
    --hover:        #191919;
    --sel-bg:       #1a0a1a;
    --sel-border:   #ff3dff;
  }

  html, body {
    width: 100%; height: 100%;
    background: #080808;
    font-family: 'Inter', sans-serif;
    color: var(--text);
    overflow: hidden;
    user-select: none;
    display: flex;
    align-items: center;
    justify-content: center;
  }

  body::before {
    content: '';
    position: fixed; inset: 0;
    background: radial-gradient(ellipse 55% 55% at 50% 50%, rgba(180,0,180,0.04) 0%, transparent 70%);
    pointer-events: none;
  }

  /* ── WINDOW ────────────────────────────────── */
  #app {
    display: flex;
    width: 760px;
    height: 520px;
    border: 1px solid var(--border2);
    box-shadow: 0 0 40px rgba(255,61,255,0.08), 0 0 80px rgba(255,61,255,0.03);
    animation: fadeIn 0.2s ease both;
    position: relative;
    z-index: 1;
    overflow: hidden;
  }
  @keyframes fadeIn { from { opacity:0; transform:translateY(6px); } }

  /* ── LEFT: TAB BAR ────────────────────────── */
  #tab-bar {
    width: 150px;
    flex-shrink: 0;
    display: flex;
    flex-direction: column;
    background: var(--panel);
    border-right: 1px solid var(--border2);
    overflow: hidden;
  }

  .tab-brand {
    padding: 12px 14px 10px;
    border-bottom: 1px solid var(--border);
    flex-shrink: 0;
  }
  .tab-brand-title {
    font-family: 'JetBrains Mono', monospace;
    font-size: 12px;
    font-weight: 700;
    letter-spacing: 2px;
    text-transform: lowercase;
    color: var(--accent);
    text-shadow: 0 0 14px var(--accent-glow);
  }
  .tab-brand-sub {
    font-size: 9px;
    color: var(--text-muted);
    letter-spacing: 1px;
    margin-top: 2px;
    font-family: 'JetBrains Mono', monospace;
  }

  .tab-list { flex: 1; overflow-y: auto; padding: 4px 0; scrollbar-width: none; }
  .tab-list::-webkit-scrollbar { display: none; }

  .tab-item {
    padding: 9px 14px;
    font-size: 11.5px;
    font-weight: 500;
    color: var(--text-dim);
    cursor: pointer;
    transition: all 0.1s;
    position: relative;
    letter-spacing: 0.2px;
    display: flex;
    align-items: center;
    gap: 8px;
  }
  .tab-item:hover { background: var(--hover); color: var(--text); }
  .tab-item.active {
    background: var(--sel-bg);
    color: var(--text);
  }
  .tab-item.active::before {
    content: '';
    position: absolute;
    left: 0; top: 0; bottom: 0;
    width: 2px;
    background: var(--accent);
    box-shadow: 0 0 8px var(--accent-glow);
  }
  .tab-arrow {
    margin-left: auto;
    font-size: 10px;
    color: var(--text-muted);
  }
  .tab-item.active .tab-arrow { color: var(--accent); }

  .tab-footer {
    padding: 8px 14px;
    border-top: 1px solid var(--border);
    flex-shrink: 0;
    font-family: 'JetBrains Mono', monospace;
    font-size: 8px;
    color: var(--text-muted);
    letter-spacing: 1px;
  }

  /* ── RIGHT: CONTENT ───────────────────────── */
  #content-area {
    flex: 1;
    display: flex;
    flex-direction: column;
    background: var(--bg);
    overflow: hidden;
  }

  /* Content header */
  .content-header {
    height: 33px;
    background: var(--panel);
    border-bottom: 1px solid var(--border2);
    display: flex;
    align-items: center;
    padding: 0 14px;
    gap: 8px;
    flex-shrink: 0;
  }
  .content-title {
    font-size: 9px;
    font-weight: 700;
    letter-spacing: 2px;
    text-transform: uppercase;
    color: var(--accent);
    display: flex;
    align-items: center;
    gap: 7px;
  }
  .content-title::before {
    content: '';
    width: 2px; height: 11px;
    background: var(--accent);
    border-radius: 1px;
    box-shadow: 0 0 6px var(--accent-glow);
  }
  .typing-badge {
    margin-left: auto;
    font-family: 'JetBrains Mono', monospace;
    font-size: 8px;
    letter-spacing: 1.5px;
    color: var(--accent);
    display: none;
    animation: blink 1s infinite;
  }
  @keyframes blink { 0%,100%{opacity:1} 50%{opacity:0.2} }

  /* Two-column body */
  .content-body {
    flex: 1;
    display: flex;
    gap: 0;
    overflow: hidden;
  }

  /* Section panel */
  .section {
    flex: 1;
    display: flex;
    flex-direction: column;
    border-right: 1px solid var(--border);
    overflow: hidden;
  }
  .section:last-child { border-right: none; }

  .section-header {
    padding: 7px 10px 6px;
    font-size: 8px;
    font-weight: 700;
    letter-spacing: 2px;
    text-transform: uppercase;
    color: var(--text-muted);
    border-bottom: 1px solid var(--border);
    background: var(--panel);
    flex-shrink: 0;
    display: flex;
    align-items: center;
    gap: 6px;
  }
  .section-header::after {
    content: '';
    flex: 1; height: 1px;
    background: var(--border);
  }

  .section-scroll {
    flex: 1;
    overflow-y: auto;
    padding: 5px;
    scrollbar-width: thin;
    scrollbar-color: #2a2a2a transparent;
  }
  .section-scroll::-webkit-scrollbar { width: 3px; }
  .section-scroll::-webkit-scrollbar-thumb { background: #2a2a2a; }

  /* ── ITEMS ──────────────────────────────────── */
  .item {
    display: flex;
    align-items: center;
    gap: 8px;
    padding: 7px 9px;
    margin-bottom: 1px;
    border-radius: 3px;
    font-size: 11.5px;
    font-weight: 500;
    cursor: pointer;
    transition: all 0.1s;
    border: 1px solid transparent;
    min-height: 31px;
    color: var(--text-dim);
  }
  .item:hover { background: var(--hover); color: var(--text); border-color: var(--border); }
  .item.selected {
    background: var(--sel-bg);
    border-color: var(--sel-border);
    color: #fff;
    box-shadow: inset 0 0 12px rgba(255,61,255,0.04);
  }
  .item-label { flex: 1; line-height: 1.2; }

  /* Toggle / checkbox */
  .item-toggle {
    width: 30px; height: 16px;
    background: #1e1e1e;
    border: 1px solid #333;
    border-radius: 8px;
    position: relative;
    flex-shrink: 0;
    transition: all 0.2s;
  }
  .item-toggle::after {
    content: '';
    position: absolute;
    left: 2px; top: 2px;
    width: 10px; height: 10px;
    background: #555;
    border-radius: 50%;
    transition: all 0.2s;
  }
  .item-toggle.on {
    background: rgba(255,61,255,0.15);
    border-color: var(--accent);
  }
  .item-toggle.on::after {
    left: 16px;
    background: var(--accent);
    box-shadow: 0 0 6px var(--accent-glow);
  }

  /* Badge */
  .badge {
    font-family: 'JetBrains Mono', monospace;
    font-size: 8px;
    font-weight: 700;
    letter-spacing: 1px;
    padding: 2px 6px;
    border-radius: 2px;
    flex-shrink: 0;
  }
  .badge.on  { background: var(--on-bg);  color: var(--on); border: 1px solid rgba(34,197,94,0.3); }
  .badge.det { background: rgba(255,200,0,0.1); color: #ffc800; border: 1px solid rgba(255,200,0,0.25); font-size: 7px; }

  /* Input item */
  .item.input-item {
    flex-direction: column;
    align-items: stretch;
    gap: 3px;
    cursor: default;
    padding: 7px 9px;
  }
  .input-lbl {
    font-size: 8px;
    font-weight: 600;
    letter-spacing: 1.5px;
    text-transform: uppercase;
    color: var(--text-muted);
  }
  .input-f {
    background: none;
    border: none;
    border-bottom: 1px solid var(--border2);
    outline: none;
    font-family: 'Inter', sans-serif;
    font-size: 11.5px;
    color: var(--text);
    padding-bottom: 2px;
    width: 100%;
    cursor: text;
  }
  .input-f::placeholder { color: var(--text-muted); }
  .item.selected .input-f { border-color: var(--accent); }

  /* Dropdown */
  .item.dropdown-item {
    flex-direction: column;
    align-items: stretch;
    gap: 3px;
    cursor: pointer;
    padding: 7px 9px;
    min-height: auto;
  }
  .dropdown-lbl {
    font-size: 8px;
    font-weight: 600;
    letter-spacing: 1.5px;
    text-transform: uppercase;
    color: var(--text-muted);
  }
  .dropdown-val {
    display: flex;
    align-items: center;
    justify-content: space-between;
    font-size: 11.5px;
    color: var(--text-dim);
  }
  .item.selected .dropdown-val { color: var(--text); }
  .dropdown-arrow { font-size: 10px; color: var(--text-muted); }

  /* ── STATUS BAR ─────────────────────────────── */
  .statusbar {
    height: 24px;
    background: var(--panel);
    border-top: 1px solid var(--border);
    display: flex;
    align-items: center;
    padding: 0 12px;
    gap: 14px;
    flex-shrink: 0;
  }
  .sb-item {
    display: flex; align-items: center; gap: 5px;
    font-size: 8.5px; letter-spacing: 0.8px;
    color: var(--text-muted); text-transform: uppercase;
  }
  .sb-key {
    font-family: 'JetBrains Mono', monospace;
    font-size: 7.5px;
    background: #1a1a1a;
    border: 1px solid var(--border2);
    border-radius: 2px;
    padding: 1px 4px;
    color: var(--text-dim);
  }
  .sb-spacer { flex: 1; }
  .sb-ver {
    font-family: 'JetBrains Mono', monospace;
    font-size: 8px;
    color: var(--text-muted);
    letter-spacing: 1px;
  }

  /* ── NOTIFICATION ───────────────────────────── */
  .notif {
    position: fixed;
    bottom: 22px; right: 22px;
    background: var(--panel);
    border: 1px solid var(--border2);
    border-left: 2px solid var(--accent);
    border-radius: 4px;
    padding: 8px 12px;
    min-width: 190px; max-width: 280px;
    z-index: 999;
    box-shadow: 0 4px 24px rgba(0,0,0,0.6), 0 0 20px rgba(255,61,255,0.06);
    animation: notifIn 0.2s ease both;
    pointer-events: none;
  }
  .notif.fade-out { animation: notifOut 0.3s ease both; }
  @keyframes notifIn  { from { opacity:0; transform:translateX(10px); } }
  @keyframes notifOut { to   { opacity:0; transform:translateX(10px); } }
  .notif-title {
    font-family: 'JetBrains Mono', monospace;
    font-size: 8px; font-weight: 700;
    letter-spacing: 1.5px; text-transform: uppercase;
    color: var(--accent); margin-bottom: 3px;
  }
  .notif-body { font-size: 11px; color: var(--text); }

  /* single full-width section */
  .content-body.single .section { flex: unset; width: 100%; }
</style>
</head>
<body>

<div id="app">
  <!-- TAB BAR -->
  <div id="tab-bar">
    <div class="tab-brand">
      <div class="tab-brand-title">blossom</div>
      <div class="tab-brand-sub">0.V1 · caps lock</div>
    </div>
    <div class="tab-list" id="tab-list"></div>
    <div class="tab-footer">.gg/blossoma</div>
  </div>

  <!-- CONTENT -->
  <div id="content-area">
    <div class="content-header">
      <div class="content-title" id="content-title">Self</div>
      <div class="typing-badge" id="typing-badge">● TYPING</div>
    </div>
    <div class="content-body" id="content-body"></div>
    <div class="statusbar">
      <div class="sb-item"><span class="sb-key">↑↓</span> navigate</div>
      <div class="sb-item"><span class="sb-key">TAB</span> tabs</div>
      <div class="sb-item"><span class="sb-key">ENTER</span> select</div>
      <div class="sb-item"><span class="sb-key">ESC</span> back</div>
      <div class="sb-spacer"></div>
      <div class="sb-ver">blossom · caps lock</div>
    </div>
  </div>
</div>

<script>
// ─── helpers ──────────────────────────────────────────────────────────────────
function btn(label, detectable) {
  return { type:'button', label, det: !!detectable };
}
function chk(label, detectable) {
  return { type:'checkbox', label, on:false, det: !!detectable };
}
function inp(label, placeholder) {
  return { type:'input', label, value:'', placeholder: placeholder||'...' };
}
function drop(label, options) {
  return { type:'dropdown', label, options, selected:0 };
}

// ─── Tab definitions ──────────────────────────────────────────────────────────
const TABS = [
  {
    key:'self', title:'Self',
    sections:[
      { name:'Toggles', items:[
        chk('Godmode', true),
        chk('Invisibility'),
        chk('No Ragdoll'),
        chk('Infinite Stamina'),
        chk('Tiny Ped', true),
        chk('No Clip', true),
        chk('Free Camera'),
        chk('Super Punch'),
        chk('Throw From Vehicle'),
        chk('Force Third Person'),
        chk('Force Driveby'),
        chk('Anti-Headshot'),
        chk('Anti-Freeze'),
        chk('Anti-Blackscreen'),
        chk('Super Strength'),
        chk('Levitation'),
        chk('Super Jump'),
        chk('Laser Eyes (Left Alt)'),
      ]},
      { name:'Model', items:[
        inp('Model Name:', 'e.g. mp_m_freemode_01'),
        btn('Change Model'),
        btn('.gg/blossoma Drip'),
      ]},
      { name:'Functions', items:[
        btn('Heal Self'),
        btn('Revive Self'),
        btn('Clear Tasks'),
        btn('Remove Wanted Level'),
      ]},
    ]
  },
  {
    key:'players', title:'Players',
    sections:[
      { name:'Actions', items:[
        inp('Player ID:', 'Server ID'),
        drop('Ped Models', ['Michael','Franklin','Trevor','Lamar','Jimmy','Police Male','SWAT','Sheriff','FIB','Paramedic','Firefighter','Business Male','Gang 1','Ballas 1','Lost MC 1','Army 1','Hobo Male']),
        drop('Attach Car', ['pounder2','pounder','mule','phantom','hauler','mixer','bus','coach','firetruk','rhino','insurgent','luxor2']),
        btn('Explode Player Vehicle'),
        btn('Steal Player Vehicle'),
        btn('Kick Player From Vehicle'),
      ]},
      { name:'Trolling', items:[
        btn('Kill Player'),
        btn('Taze Player'),
        btn('Cage Player'),
        btn('Explode Player', true),
        btn('Give All Nearby Objects'),
        btn('Teleport To Player'),
        btn('Kick From Vehicle'),
        btn('Freeze Player'),
        btn('Glitch Player'),
        btn('Limbo Player'),
        chk('Spectate Player'),
      ]},
    ]
  },
  {
    key:'server', title:'Server',
    sections:[
      { name:'Player', items:[
        inp('Player ID:', 'Server ID'),
        btn('Kill Player'),
        btn('Taze Player'),
        btn('Cage Player'),
        btn('Explode Player', true),
        btn('Give All Nearby Objects'),
        btn('Teleport To Player'),
        btn('Kick From Vehicle'),
        btn('Freeze Player'),
        btn('Glitch Player'),
        btn('Limbo Player'),
        chk('Spectate Player'),
        btn('Steal Player Inventory'),
      ]},
      { name:'Everyone', items:[
        btn('Kill Everyone'),
        btn('Explode Everyone', true),
        btn('Launch All Players'),
        drop('Attach Car To Everyone', ['pounder2','mule','phantom','hauler','mixer','bus','rhino','insurgent']),
        drop('Attach Entity To Everyone', ['prop_cs1_14b_traind','prop_barrier_work05','prop_dumpster_01a','prop_roadcone02a','prop_bench_01a','prop_bin_01a','prop_roadcone01a']),
      ]},
    ]
  },
  {
    key:'weapons', title:'Weapons',
    sections:[
      { name:'Mods', items:[
        chk('Infinite Ammo'),
        chk('Explosive Ammo', true),
        chk('One Shot Kill'),
        chk('Spoofed Weapon Spawning'),
        btn('Remove All Weapons'),
        btn('Refill Ammo'),
        btn('Give Max Ammo'),
        btn('Spoof All Weapons'),
        drop('Aiming Style', ['Default','Gangster','Wild','Red Neck']),
        btn('Apply Aiming Style'),
      ]},
      { name:'Spawner', items:[
        inp('Weapon:', 'e.g. weapon_pistol'),
        btn('Spawn Weapon'),
        drop('Pistols',    ['Pistol','Combat Pistol','AP Pistol','Pistol .50','Heavy Pistol','Revolver']),
        drop('SMGs',       ['Micro SMG','SMG','SMG MK2','Assault SMG','Combat PDW','Machine Pistol','Mini SMG']),
        drop('Shotguns',   ['Pump Shotgun','Pump MK2','Sawed-Off','Assault Shotgun','Bullpup Shotgun','Heavy Shotgun','Sweeper']),
        drop('Rifles',     ['Assault Rifle','Assault MK2','Carbine Rifle','Carbine MK2','Advanced Rifle','Special Carbine','Bullpup Rifle','Military Rifle']),
        drop('Snipers',    ['Sniper Rifle','Heavy Sniper','Heavy Sniper MK2','Marksman Rifle','Marksman MK2']),
        drop('Heavy',      ['RPG','Grenade Launcher','Minigun','Firework Launcher','Railgun','Homing Launcher','Compact Grenade Launcher','Widowmaker']),
        drop('Melee',      ['Knife','Nightstick','Hammer','Bat','Crowbar','Golf Club','Bottle','Dagger','Hatchet','Machete','Switchblade','Battle Axe','Pool Cue','Wrench']),
        drop('Throwables', ['Grenade','Sticky Bomb','Proximity Mine','Tear Gas','Molotov','Jerry Can','Snowball','Pipe Bomb','BZ Gas']),
      ]},
    ]
  },
  {
    key:'vehicle', title:'Vehicle',
    sections:[
      { name:'Mods', items:[
        chk('Vehicle Godmode'),
        chk('Force Vehicle Engine'),
        chk('Vehicle Auto Repair'),
        chk('Freeze Vehicle'),
        chk('Vehicle Hop'),
        chk('Rainbow Vehicle'),
        chk('Drift Mode'),
        chk('Easy Handling'),
        chk('Instant Brakes'),
        chk('Unlimited Fuel'),
      ]},
      { name:'Actions', items:[
        chk('Vehicle Invincible'),
        btn('Repair Vehicle'),
        btn('Clean Vehicle'),
        btn('Max Upgrade Vehicle'),
        btn('Delete Vehicle'),
        btn('Flip Vehicle Upright'),
        btn('Spawn Vehicle (Custom)'),
        btn('Eject From Vehicle'),
        btn('Enter Closest Vehicle'),
      ]},
    ]
  },
  {
    key:'teleport', title:'Teleport',
    sections:[
      { name:'Locations', items:[
        btn('Mission Row PD'),
        btn('Del Perro Pier'),
        btn('Grove Street'),
        btn('Legion Square'),
        btn('LS Customs'),
        btn('Maze Bank'),
        btn('Mirror Park'),
        btn('Vespucci Beach'),
        btn('Vinewood'),
        btn('Sandy Shores'),
        btn('Pillbox Hospital'),
      ]},
      { name:'Other', items:[
        btn('Teleport To Waypoint'),
        btn('Teleport To Coords'),
        btn('Print Current Coords'),
        btn('Teleport Last Death'),
      ]},
    ]
  },
  {
    key:'animations', title:'Animations',
    sections:[
      { name:'Force Emotes', items:[
        btn('Detach All Entities'),
        btn('Twerk On Them'),
        btn('Give Them Backshots'),
        btn('Wank On Them'),
        btn('Piggyback On Player'),
        btn('Blame Arrest'),
        btn('Stop Emote'),
      ]},
      { name:'Emote List', items:[
        drop('Dances',    ['Gangnam Style','Twerk','Shuffle','Break Dance','Waltz','Salsa']),
        drop('Gestures',  ['Wave','Point','Middle Finger','Thumbs Up','Facepalm','Shrug']),
        drop('Sits',      ['Park Bench','Chair','Ground','Meditation','Lean Wall']),
        drop('Idles',     ['Smoke','Phone Call','Lean','Stretch']),
        btn('Play Emote'),
        btn('Stop Emote'),
      ]},
    ]
  },
  {
    key:'triggers', title:'Triggers',
    sections:[
      { name:'Item Spawner', items:[
        inp('Item Name:', 'e.g. water'),
        inp('Amount:', 'e.g. 50'),
        btn('Spawn Item'),
      ]},
      { name:'Money Spawner', items:[
        inp('Amount:', 'e.g. 100000'),
        btn('Spawn'),
      ]},
      { name:'Exploits', items:[
        btn('Set Police Job'),
        btn('Set EMS Job'),
        btn('Steal Player Inventory'),
        inp('Client Event:', 'event:name'),
        btn('Fire Client Event'),
        inp('Server Event:', 'event:name'),
        btn('Fire Server Event'),
        btn('Open Admin Menu'),
        btn('Clear Comms'),
        btn('Comserv End (-5)'),
        btn('Give ESX Job (Police)'),
      ]},
    ]
  },
  {
    key:'vip', title:'Vip',
    sections:[
      { name:'Item Spawner', items:[
        inp('Name:', '...'),
        inp('Amount:', '...'),
        btn('Spawn Item (VIP)'),
      ]},
      { name:'Dirty Money', items:[
        inp('Amount:', 'e.g. 500000'),
        btn('Launder Money'),
        btn('Clean Dirty Money'),
      ]},
    ]
  },
  {
    key:'settings', title:'.gg/blossoma',
    sections:[
      { name:'Menu', items:[
        btn('Reset Position'),
        btn('Reload Menu'),
        btn('Toggle Debug Mode'),
        inp('Key Bind:', 'virtual key code'),
      ]},
      { name:'Design', items:[
        drop('Accent Color', ['Pink (Default)','Red','Blue','Green','Orange']),
        drop('Position X', ['Left','Center','Right']),
        drop('Position Y', ['Top','Middle','Bottom']),
      ]},
      { name:'Server Info', items:[
        btn('Print Server IP'),
        btn('Print Player Count'),
        btn('Print Resources'),
        btn('Copy Server Endpoint'),
      ]},
    ]
  },
];

// ─── State ────────────────────────────────────────────────────────────────────
const state = {
  activeTab: 0,
  // per-section selection: [tabIdx][sectionIdx] = itemIdx
  sel: TABS.map(t => t.sections.map(() => 0)),
  activeSec: TABS.map(t => 0),   // which section is keyboard focus in
  isTyping: false,
};

// ─── Notifications ─────────────────────────────────────────────────────────────
let nTimeout = null;
function notif(title, msg) {
  let el = document.getElementById('notif-el');
  if (el) { el.remove(); clearTimeout(nTimeout); }
  el = document.createElement('div');
  el.className = 'notif'; el.id = 'notif-el';
  el.innerHTML = `<div class="notif-title">${title}</div><div class="notif-body">${msg}</div>`;
  document.body.appendChild(el);
  nTimeout = setTimeout(() => {
    el.classList.add('fade-out');
    setTimeout(() => el.remove(), 300);
  }, 3500);
}

// ─── Render ────────────────────────────────────────────────────────────────────
function renderTabs() {
  const list = document.getElementById('tab-list');
  list.innerHTML = '';
  TABS.forEach((t, i) => {
    const el = document.createElement('div');
    el.className = 'tab-item' + (i === state.activeTab ? ' active' : '');
    el.innerHTML = `<span>${t.title}</span><span class="tab-arrow">›</span>`;
    el.onclick = () => { state.activeTab = i; state.isTyping = false; render(); };
    list.appendChild(el);
  });
}

function renderContent() {
  const tab = TABS[state.activeTab];
  document.getElementById('content-title').textContent = tab.title;
  document.getElementById('typing-badge').style.display = state.isTyping ? 'block' : 'none';

  const body = document.getElementById('content-body');
  body.innerHTML = '';

  // Layout: 3-section tabs use two columns with stacked left; others use equal halves or single
  tab.sections.forEach((sec, si) => {
    const col = document.createElement('div');
    col.className = 'section';

    const hdr = document.createElement('div');
    hdr.className = 'section-header';
    hdr.textContent = sec.name;
    col.appendChild(hdr);

    const scroll = document.createElement('div');
    scroll.className = 'section-scroll';

    sec.items.forEach((item, ii) => {
      const isSel = state.sel[state.activeTab][si] === ii && state.activeSec[state.activeTab] === si;
      renderItem(scroll, item, ii, si, isSel);
    });

    col.appendChild(scroll);
    body.appendChild(col);
  });

  // scroll selected into view
  const selEl = body.querySelector('.item.selected');
  if (selEl) selEl.scrollIntoView({ block: 'nearest', behavior: 'smooth' });
}

function renderItem(parent, item, ii, si, isSel) {
  if (item.type === 'checkbox') {
    const el = document.createElement('div');
    el.className = 'item' + (isSel ? ' selected' : '');
    const lbl = document.createElement('span');
    lbl.className = 'item-label';
    lbl.textContent = item.label;
    el.appendChild(lbl);
    if (item.det) {
      const d = document.createElement('span');
      d.className = 'badge det';
      d.textContent = 'DET';
      el.appendChild(d);
    }
    const tog = document.createElement('div');
    tog.className = 'item-toggle' + (item.on ? ' on' : '');
    el.appendChild(tog);
    el.onclick = () => {
      state.sel[state.activeTab][si] = ii;
      state.activeSec[state.activeTab] = si;
      item.on = !item.on;
      render();
      notif('blossom Menu', `${item.label}: ${item.on ? 'ON' : 'OFF'}`);
    };
    parent.appendChild(el);
    return;
  }

  if (item.type === 'button') {
    const el = document.createElement('div');
    el.className = 'item' + (isSel ? ' selected' : '');
    const lbl = document.createElement('span');
    lbl.className = 'item-label';
    lbl.textContent = item.label;
    el.appendChild(lbl);
    if (item.det) {
      const d = document.createElement('span');
      d.className = 'badge det';
      d.textContent = 'DET';
      el.appendChild(d);
    }
    el.onclick = () => {
      state.sel[state.activeTab][si] = ii;
      state.activeSec[state.activeTab] = si;
      render();
      notif('[NOTIFICATION] blossom Menu', getMsg(item.label));
    };
    parent.appendChild(el);
    return;
  }

  if (item.type === 'input') {
    const el = document.createElement('div');
    el.className = 'item input-item' + (isSel ? ' selected' : '');
    const lbl = document.createElement('div');
    lbl.className = 'input-lbl';
    lbl.textContent = item.label;
    const inp = document.createElement('input');
    inp.className = 'input-f';
    inp.placeholder = item.placeholder;
    inp.value = item.value;
    inp.oninput = e => item.value = e.target.value;
    inp.onfocus = () => {
      state.sel[state.activeTab][si] = ii;
      state.activeSec[state.activeTab] = si;
      state.isTyping = true;
      render();
    };
    inp.onblur = () => { state.isTyping = false; render(); };
    inp.onclick = e => { e.stopPropagation(); inp.focus(); };
    el.appendChild(lbl);
    el.appendChild(inp);
    el.onclick = () => { state.sel[state.activeTab][si] = ii; state.activeSec[state.activeTab] = si; render(); };
    parent.appendChild(el);
    if (isSel && state.isTyping) setTimeout(() => inp.focus(), 0);
    return;
  }

  if (item.type === 'dropdown') {
    const el = document.createElement('div');
    el.className = 'item dropdown-item' + (isSel ? ' selected' : '');
    const lbl = document.createElement('div');
    lbl.className = 'dropdown-lbl';
    lbl.textContent = item.label;
    const val = document.createElement('div');
    val.className = 'dropdown-val';
    const txt = document.createElement('span');
    txt.textContent = item.options[item.selected];
    const arr = document.createElement('span');
    arr.className = 'dropdown-arrow';
    arr.textContent = '▾';
    val.appendChild(txt);
    val.appendChild(arr);
    el.appendChild(lbl);
    el.appendChild(val);
    el.onclick = () => {
      state.sel[state.activeTab][si] = ii;
      state.activeSec[state.activeTab] = si;
      item.selected = (item.selected + 1) % item.options.length;
      render();
      notif('blossom Menu', `${item.label}: ${item.options[item.selected]}`);
    };
    parent.appendChild(el);
  }
}

function getMsg(label) {
  const map = {
    'Godmode': 'Godmode toggled.',
    'Change Model': 'Model change attempted.',
    'Kill Player': 'Kill sent.',
    'Explode Player': 'Explosion triggered.',
    'Teleport To Player': 'Teleported.',
    'Repair Vehicle': 'Vehicle repaired.',
    'Max Upgrade Vehicle': 'Vehicle maxed.',
    'Delete Vehicle': 'Vehicle deleted.',
    'Spawn Item': 'Item spawned.',
    'Spawn': 'Money spawned.',
    'Set Police Job': 'Police job set.',
    'Set EMS Job': 'EMS job set.',
    'Open Admin Menu': 'Attempting to open admin menu.',
    'Clear Comms': 'Comms cleared.',
    'Print Current Coords': 'Coords printed to console.',
    'Detach All Entities': 'Entities detached.',
    'Launch All Players': 'Everyone launched.',
    'Steal Player Inventory': 'Stealing inventory...',
    'Spoof All Weapons': 'All weapons spoofed.',
    'Give Max Ammo': 'Max ammo given.',
  };
  return map[label] || 'Action executed.';
}

function render() {
  renderTabs();
  renderContent();
}

// ─── Keyboard ──────────────────────────────────────────────────────────────────
document.addEventListener('keydown', e => {
  if (state.isTyping) {
    if (e.key === 'Enter' || e.key === 'Escape') { state.isTyping = false; render(); }
    return;
  }

  const tab = TABS[state.activeTab];
  const si = state.activeSec[state.activeTab];
  const sec = tab.sections[si];
  const itemCount = sec ? sec.items.length : 0;

  if (e.key === 'Tab') {
    e.preventDefault();
    state.activeTab = (state.activeTab + (e.shiftKey ? -1 : 1) + TABS.length) % TABS.length;
    state.isTyping = false;
    render();
  } else if (e.key === 'ArrowLeft') {
    if (tab.sections.length > 1) {
      state.activeSec[state.activeTab] = (si - 1 + tab.sections.length) % tab.sections.length;
      render();
    }
  } else if (e.key === 'ArrowRight') {
    if (tab.sections.length > 1) {
      state.activeSec[state.activeTab] = (si + 1) % tab.sections.length;
      render();
    }
  } else if (e.key === 'ArrowUp') {
    e.preventDefault();
    state.sel[state.activeTab][si] = (state.sel[state.activeTab][si] - 1 + itemCount) % itemCount;
    render();
  } else if (e.key === 'ArrowDown') {
    e.preventDefault();
    state.sel[state.activeTab][si] = (state.sel[state.activeTab][si] + 1) % itemCount;
    render();
  } else if (e.key === 'Enter') {
    const item = sec && sec.items[state.sel[state.activeTab][si]];
    if (!item) return;
    if (item.type === 'checkbox') {
      item.on = !item.on;
      render();
      notif('blossom Menu', `${item.label}: ${item.on ? 'ON' : 'OFF'}`);
    } else if (item.type === 'button') {
      render();
      notif('[NOTIFICATION] blossom Menu', getMsg(item.label));
    } else if (item.type === 'input') {
      state.isTyping = true;
      render();
    } else if (item.type === 'dropdown') {
      item.selected = (item.selected + 1) % item.options.length;
      render();
      notif('blossom Menu', `${item.label}: ${item.options[item.selected]}`);
    }
  } else if (e.key === 'Escape') {
    state.isTyping = false; render();
  }
});

// ─── Init ──────────────────────────────────────────────────────────────────────
render();
notif('[NOTIFICATION] blossom Menu', 'Finished Enjoy.');
</script>
</body>
</html>
